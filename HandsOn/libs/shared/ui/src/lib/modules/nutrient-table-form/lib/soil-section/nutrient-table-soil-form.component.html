<ng-container [formGroup]="parentForm">
    <div formGroupName="soilRow" class="overflow-x-auto min-h-[450px]">
        <table class="min-w-max border-collapse text-center mx-auto">
            <thead>
                <tr>
                    <ng-container *ngFor="let header of soilHeaders">
                        <th colspan="2">{{ header.title }}</th>
                    </ng-container>
                </tr>
            </thead>

            <tbody>
                <tr formArrayName="soilColumns" *ngFor="let row of [].constructor(5); let i = index">
                    <ng-container *ngFor="let header of soilHeaders; let j = index">
                        <td class="w-24" [innerHTML]="header.items[i] ? header.items[i].label : ''"></td>

                        <td>
                            <ng-container *ngIf="header.items[i]">
                                <div [formGroupName]="i" class="flex flex-row gap-0.5">
                                    <lib-input-number 
                                        [id]="'min-' + i + '-' + j"
                                        [control]="getMinSoil(header.items[i].id)" 
                                        [placeholder]="'Min.'"
                                        [required]="true"  
                                        [min]="0" 
                                        [max]="10000" 
                                        class="w-16"
                                    ></lib-input-number>

                                    <ng-container *ngIf="header.items[i].complex === true">
                                        <lib-input-number 
                                            [id]="'med1-' + i + '-' + j"
                                            [control]="getMed1Soil(header.items[i].id)" 
                                            [placeholder]="'Méd1.'"
                                            [required]="true"  
                                            [min]="getMinSoil(header.items[i].id).value + 1" 
                                            [max]="10000" 
                                            class="w-16"
                                        ></lib-input-number>

                                        <lib-input-number 
                                            [id]="'med2-' + i + '-' + j"
                                            [control]="getMed2Soil(header.items[i].id)" 
                                            [placeholder]="'Méd2.'"
                                            [required]="true"  
                                            [min]="getMed1Soil(header.items[i].id).value + 1" 
                                            [max]="10000" 
                                            class="w-16">
                                        </lib-input-number>
                                    </ng-container>

                                    <lib-input-number 
                                        [id]="'max-' + i + '-' + j" 
                                        [control]="getMaxSoil(header.items[i].id)"
                                        [placeholder]="'Máx.'"
                                        [required]="true"  
                                        [min]="header.items[i].complex === true ? getMed2Soil(header.items[i].id).value + 1 : getMinSoil(header.items[i].id).value + 1" 
                                        [max]="10000" 
                                        class="w-16">
                                    </lib-input-number>
                                </div>
                            </ng-container>
                        </td>
                    </ng-container>
                </tr>
            </tbody>
        </table>
    </div>
</ng-container>