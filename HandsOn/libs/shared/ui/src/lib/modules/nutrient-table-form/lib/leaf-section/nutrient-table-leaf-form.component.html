<ng-container>
  <div class="flex flex-wrap gap-2 mb-4" *ngIf="periods.length > 1">
    <button
      *ngFor="let period of periods; let i = index"
      type="button"
      (click)="selectPeriod(i)"
      [ngClass]="{
        'bg-primary text-primary-contrast': selectedPeriodIndex === i,
        'bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-200':
          selectedPeriodIndex !== i
      }"
      class="px-4 py-2 rounded-md font-medium text-sm transition-colors"
    >
      {{ period }}
    </button>
  </div>

  <div *ngFor="let leafRow of leafRows.controls; let i = index">
    <div
      *ngIf="i === selectedPeriodIndex"
      class="border border-zinc-200 dark:border-zinc-700 rounded-lg p-4 space-y-6"
    >
      <h3 class="text-lg font-semibold">
        {{ periods[i] }}
      </h3>

      <ng-container *ngFor="let group of leafHeaders">
        <fieldset class="border border-zinc-300 dark:border-zinc-600 rounded-lg p-4">
          <legend class="text-base font-semibold px-2 text-primary">
            {{ group.title }}
          </legend>
          <div
            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-2"
          >
            <ng-container *ngFor="let item of group.items">
              <div
                class="flex flex-col border rounded-xl border-1 p-2 border-gray-300 dark:border-slate-800"
              >
                <label
                  [for]="'min-' + i + '-' + item.id"
                  class="block text-sm font-medium mb-1.5"
                  [innerHTML]="item.label"
                >
                </label>
                <div class="flex flex-col gap-2">
                  <div class="flex-1 space-y-1">
                    <div
                      class="text-xs font-medium text-zinc-700 dark:text-zinc-300 bg-gray-200 dark:bg-zinc-900 px-2 py-1 rounded"
                    >
                      Min
                    </div>
                    <lib-input-number
                      [id]="'min-' + i + '-' + item.id"
                      [control]="getMinLeaf(i, item.id)"
                      [placeholder]="'Min.'"
                      [required]="true"
                      [min]="0"
                      [max]="10000"
                    ></lib-input-number>

                    <div
                      class="text-xs font-medium text-zinc-700 dark:text-zinc-300 bg-gray-200 dark:bg-zinc-900 px-2 py-1 rounded"
                    >
                      Max
                    </div>
                    <lib-input-number
                      [id]="'max-' + i + '-' + item.id"
                      [control]="getMaxLeaf(i, item.id)"
                      [placeholder]="'MÃ¡x.'"
                      [required]="true"
                      [min]="getMinLeaf(i, item.id).value + 1"
                      [max]="10000"
                    ></lib-input-number>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </fieldset>
      </ng-container>
    </div>
  </div>
</ng-container>