<form
  [formGroup]="fertilizerTableForm"
  (ngSubmit)="onSubmit()"
  class="w-full flex flex-col gap-2 mt-6"
>
    <div class="w-full mx-auto flex flex-col lg:flex-row gap-2 px-6 lg:px-10">
        <div class="w-full lg:w-3/5 m-auto">
            <lib-fieldset [legend]="'Como Funciona'" [toggleable]="isSmallScreen" [styleClass]="'my-auto'">
                <p [innerHtml]="currentText"></p>
            </lib-fieldset>
        </div>
        
        <div class="w-full max-w-md lg:w-2/5 m-auto flex flex-col gap-2">
            <lib-select
                [id]="'cultureType'"
                [control]="cultureType"
                [label]="'Cultura'"
                [placeholder]="'Selecione uma cultura'"
                [options]="cultureOptions"
                [required]="true"
                [fluid]="true"
                [filter]="true"
                *ngIf="selectCulture"
            ></lib-select>

            <lib-input-number
                [id]="'expectedBasesSat'"
                [control]="expectedBasesSat"
                [label]="'Saturação por Bases Esperada'" 
                [placeholder]="'%70'" 
                [min]="0"
                [max]="100"
                [maxFractionDigits]="0"
                [prefix]="'%'"
                [variant]="'outlined'"
                [required]="true" 
                [showErrorMessage]="true"
                [showButtons]="true"
            ></lib-input-number>
        </div>
    </div>
    
    <div class="mt-10 px-0 lg:px-10">
        <lib-tabs [tabs]="tabs" (tabChange)="onTabChange($event)">
            <ng-template #leafSection>
                <lib-fertilizer-table-leaf-form
                    [fertilizerTable]="fertilizerTable"
                ></lib-fertilizer-table-leaf-form>
            </ng-template>

            <ng-template #soilSection>
                <lib-fertilizer-table-soil-form
                    [fertilizerTable]="fertilizerTable"
                ></lib-fertilizer-table-soil-form>
            </ng-template>
        </lib-tabs>
    </div>
    
    <lib-button
        class="w-full max-w-96 mt-6 mx-auto"
        [label]="submitLabel"
        [type]="'submit'"
        [fluid]="true"
        [severity]="'primary'"
        [loading]="loading"
    ></lib-button>
</form>